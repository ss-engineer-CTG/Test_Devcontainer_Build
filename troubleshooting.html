<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>トラブルシューティング編 - DevContainer完全ガイド</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* トラブルシューティング編専用スタイル */
        .troubleshooting-section {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 2px 4px var(--shadow);
        }

        .troubleshooting-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--warning);
        }

        .troubleshooting-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--warning), #f59e0b);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }

        .troubleshooting-title {
            font-size: 1.8rem;
            margin: 0;
            color: var(--text-color);
        }

        .problem-card {
            background: var(--background);
            border: 1px solid var(--border);
            border-left: 4px solid var(--error);
            border-radius: 8px;
            padding: 2rem;
            margin: 1.5rem 0;
            transition: all 0.3s ease;
        }

        .problem-card:hover {
            box-shadow: 0 8px 25px var(--shadow);
            transform: translateY(-2px);
        }

        .problem-header {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            margin-bottom: 1.5rem;
            cursor: pointer;
        }

        .problem-status {
            width: 40px;
            height: 40px;
            background: var(--error);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .problem-info {
            flex: 1;
        }

        .problem-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-color);
            margin: 0 0 0.5rem 0;
        }

        .problem-description {
            color: var(--text-light);
            font-size: 0.9rem;
            margin: 0;
        }

        .problem-toggle {
            font-size: 1.2rem;
            color: var(--text-light);
            transition: transform 0.3s ease;
        }

        .problem-toggle.expanded {
            transform: rotate(180deg);
        }

        .problem-content {
            display: none;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border);
        }

        .problem-content.expanded {
            display: block;
        }

        .solution-steps {
            background: linear-gradient(135deg, rgba(72, 187, 120, 0.1), rgba(56, 178, 172, 0.05));
            border: 1px solid var(--success);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .solution-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            font-weight: 600;
            color: var(--success);
        }

        .solution-step {
            background: var(--background);
            border-radius: 6px;
            padding: 1rem;
            margin: 0.75rem 0;
            border-left: 3px solid var(--success);
        }

        .step-number {
            display: inline-block;
            background: var(--success);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            text-align: center;
            line-height: 24px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-right: 0.75rem;
        }

        .command-block {
            background: #1a1a2e;
            border-radius: 6px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            position: relative;
            overflow-x: auto;
        }

        .command-block::before {
            content: 'Terminal';
            position: absolute;
            top: 0.5rem;
            right: 1rem;
            font-size: 0.7rem;
            color: #a0aec0;
            text-transform: uppercase;
        }

        .command-block code {
            color: #4ecdc4;
            display: block;
            margin: 0.25rem 0;
        }

        .command-output {
            color: #a0aec0;
        }

        .command-success {
            color: #48bb78;
        }

        .command-error {
            color: #f56565;
        }

        .warning-box {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(245, 158, 11, 0.05));
            border: 1px solid var(--warning);
            border-left: 4px solid var(--warning);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .warning-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            font-weight: 600;
            color: var(--warning);
        }

        .info-box {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(37, 99, 235, 0.05));
            border: 1px solid var(--primary-color);
            border-left: 4px solid var(--primary-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .category-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid var(--border);
            overflow-x: auto;
        }

        .category-tab {
            padding: 0.75rem 1.5rem;
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-light);
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
            white-space: nowrap;
            font-size: 0.9rem;
        }

        .category-tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
            font-weight: 600;
        }

        .category-tab:hover {
            color: var(--text-color);
        }

        .category-content {
            display: none;
        }

        .category-content.active {
            display: block;
        }

        .quick-fixes {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .quick-fix-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            margin: 0.5rem 0;
            background: var(--background);
            border-radius: 6px;
            border: 1px solid var(--border);
            transition: all 0.2s ease;
        }

        .quick-fix-item:hover {
            border-color: var(--primary-color);
            background: rgba(37, 99, 235, 0.05);
        }

        .quick-fix-icon {
            width: 40px;
            height: 40px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .quick-fix-content {
            flex: 1;
        }

        .quick-fix-title {
            font-weight: 600;
            color: var(--text-color);
            margin: 0 0 0.25rem 0;
        }

        .quick-fix-description {
            color: var(--text-light);
            font-size: 0.9rem;
            margin: 0;
        }

        .diagnostic-tools {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .diagnostic-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .diagnostic-tool {
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .diagnostic-tool:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px var(--shadow);
            border-color: var(--primary-color);
        }

        .diagnostic-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            color: white;
            font-size: 1.5rem;
        }

        .diagnostic-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        .run-diagnostic {
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-size: 0.9rem;
            margin-top: 1rem;
            transition: background-color 0.2s ease;
        }

        .run-diagnostic:hover {
            background: var(--primary-hover);
        }

        .faq-section {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .faq-item {
            border-bottom: 1px solid var(--border);
            padding: 1.5rem 0;
        }

        .faq-item:last-child {
            border-bottom: none;
        }

        .faq-question {
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 0;
        }

        .faq-question:hover {
            color: var(--primary-color);
        }

        .faq-icon {
            width: 30px;
            height: 30px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8rem;
            flex-shrink: 0;
        }

        .faq-answer {
            margin-top: 1rem;
            margin-left: 41px;
            color: var(--text-light);
            line-height: 1.6;
            display: none;
        }

        .faq-answer.expanded {
            display: block;
        }

        .support-resources {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(16, 185, 129, 0.1));
            border: 1px solid var(--primary-color);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }

        .resource-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .resource-link {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
            text-decoration: none;
            color: inherit;
            transition: all 0.2s ease;
        }

        .resource-link:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            transform: translateY(-1px);
        }

        .resource-icon {
            font-size: 1.5rem;
            color: var(--primary-color);
        }

        .resource-link:hover .resource-icon {
            color: white;
        }
    </style>
</head>
<body>
    <!-- ヘッダー -->
    <header class="header">
        <div class="container">
            <h1><i class="fas fa-wrench"></i> トラブルシューティング編</h1>
            <p>よくある問題と解決方法の完全ガイド</p>
        </div>
    </header>

    <!-- メインコンテンツ -->
    <main class="main">
        <div class="container">
            <!-- パンくずリスト -->
            <nav class="breadcrumb">
                <ol class="breadcrumb-list">
                    <li class="breadcrumb-item"><a href="index.html">ホーム</a></li>
                    <li class="breadcrumb-separator">></li>
                    <li class="breadcrumb-item current">トラブルシューティング編</li>
                </ol>
            </nav>

            <!-- クイック修正 -->
            <section class="quick-fixes">
                <h2><i class="fas fa-bolt"></i> よくある問題のクイック修正</h2>
                <p>まずはこれらの一般的な解決策を試してみてください</p>

                <div class="quick-fix-item">
                    <div class="quick-fix-icon">
                        <i class="fas fa-refresh"></i>
                    </div>
                    <div class="quick-fix-content">
                        <h4 class="quick-fix-title">Docker Desktop の再起動</h4>
                        <p class="quick-fix-description">多くの問題はDocker Desktopの再起動で解決されます</p>
                    </div>
                </div>

                <div class="quick-fix-item">
                    <div class="quick-fix-icon">
                        <i class="fas fa-sync-alt"></i>
                    </div>
                    <div class="quick-fix-content">
                        <h4 class="quick-fix-title">DevContainer の再構築</h4>
                        <p class="quick-fix-description">VS Code で「Dev Containers: Rebuild Container」を実行</p>
                    </div>
                </div>

                <div class="quick-fix-item">
                    <div class="quick-fix-icon">
                        <i class="fas fa-terminal"></i>
                    </div>
                    <div class="quick-fix-content">
                        <h4 class="quick-fix-title">WSL2 の再起動</h4>
                        <p class="quick-fix-description">管理者権限で「wsl --shutdown」を実行後、WSLを再起動</p>
                    </div>
                </div>

                <div class="quick-fix-item">
                    <div class="quick-fix-icon">
                        <i class="fas fa-trash"></i>
                    </div>
                    <div class="quick-fix-content">
                        <h4 class="quick-fix-title">Docker キャッシュのクリア</h4>
                        <p class="quick-fix-description">「docker system prune -a」で未使用のイメージとキャッシュを削除</p>
                    </div>
                </div>
            </section>

            <!-- カテゴリ別トラブルシューティング -->
            <section class="troubleshooting-section">
                <div class="troubleshooting-header">
                    <div class="troubleshooting-icon">
                        <i class="fas fa-tools"></i>
                    </div>
                    <h2 class="troubleshooting-title">カテゴリ別問題解決</h2>
                </div>

                <div class="category-tabs">
                    <button class="category-tab active" onclick="showCategory('wsl')">WSL2 関連</button>
                    <button class="category-tab" onclick="showCategory('docker')">Docker 関連</button>
                    <button class="category-tab" onclick="showCategory('vscode')">VS Code 関連</button>
                    <button class="category-tab" onclick="showCategory('devcontainer')">DevContainer 関連</button>
                    <button class="category-tab" onclick="showCategory('network')">ネットワーク 関連</button>
                    <button class="category-tab" onclick="showCategory('performance')">パフォーマンス</button>
                </div>

                <!-- WSL2関連の問題 -->
                <div id="wsl" class="category-content active">
                    <div class="problem-card">
                        <div class="problem-header" onclick="toggleProblem(this)">
                            <div class="problem-status">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="problem-info">
                                <h3 class="problem-title">WSL2が起動しない</h3>
                                <p class="problem-description">「WslRegisterDistribution failed with error: 0x80370112」などのエラー</p>
                            </div>
                            <div class="problem-toggle">▼</div>
                        </div>
                        <div class="problem-content">
                            <div class="solution-steps">
                                <div class="solution-header">
                                    <i class="fas fa-check-circle"></i> 解決手順
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">1</span>
                                    BIOSで仮想化支援機能（Intel VT-x/AMD-V）を有効にする
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">2</span>
                                    Windows機能「Hyper-V」を有効にする
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">3</span>
                                    管理者権限でPowerShellを開き、以下を実行：
                                    <div class="command-block">
                                        <code>dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart</code>
                                        <code>dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart</code>
                                    </div>
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">4</span>
                                    Windowsを再起動後、WSL2 Linuxカーネル更新プログラムをインストール
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="problem-card">
                        <div class="problem-header" onclick="toggleProblem(this)">
                            <div class="problem-status">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="problem-info">
                                <h3 class="problem-title">WSL2のパフォーマンスが遅い</h3>
                                <p class="problem-description">ファイルアクセスが遅い、ビルドに時間がかかる</p>
                            </div>
                            <div class="problem-toggle">▼</div>
                        </div>
                        <div class="problem-content">
                            <div class="solution-steps">
                                <div class="solution-header">
                                    <i class="fas fa-check-circle"></i> 解決手順
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">1</span>
                                    プロジェクトをWSL2のファイルシステム内に配置する
                                    <div class="command-block">
                                        <code># Windows側ではなく、WSL2内に配置</code>
                                        <code>cd /home/username/</code>
                                        <code>git clone [repository-url]</code>
                                    </div>
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">2</span>
                                    .wslconfigファイルでメモリ設定を最適化：
                                    <div class="command-block">
                                        <code># C:\Users\[username]\.wslconfig</code>
                                        <code>[wsl2]</code>
                                        <code>memory=8GB</code>
                                        <code>processors=4</code>
                                        <code>swap=2GB</code>
                                    </div>
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">3</span>
                                    WSL2を再起動：
                                    <div class="command-block">
                                        <code>wsl --shutdown</code>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Docker関連の問題 -->
                <div id="docker" class="category-content">
                    <div class="problem-card">
                        <div class="problem-header" onclick="toggleProblem(this)">
                            <div class="problem-status">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="problem-info">
                                <h3 class="problem-title">Docker Desktop が起動しない</h3>
                                <p class="problem-description">「Docker Desktop requires a newer WSL kernel version」エラー</p>
                            </div>
                            <div class="problem-toggle">▼</div>
                        </div>
                        <div class="problem-content">
                            <div class="solution-steps">
                                <div class="solution-header">
                                    <i class="fas fa-check-circle"></i> 解決手順
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">1</span>
                                    WSLを最新版に更新：
                                    <div class="command-block">
                                        <code>wsl --update</code>
                                        <code>wsl --version</code>
                                    </div>
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">2</span>
                                    Docker Desktopを最新版に更新
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">3</span>
                                    WSL統合設定を確認：
                                    <br>Docker Desktop → Settings → Resources → WSL Integration
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="problem-card">
                        <div class="problem-header" onclick="toggleProblem(this)">
                            <div class="problem-status">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="problem-info">
                                <h3 class="problem-title">Docker イメージのビルドが失敗する</h3>
                                <p class="problem-description">「COPY failed」「RUN command failed」などのエラー</p>
                            </div>
                            <div class="problem-toggle">▼</div>
                        </div>
                        <div class="problem-content">
                            <div class="solution-steps">
                                <div class="solution-header">
                                    <i class="fas fa-check-circle"></i> 解決手順
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">1</span>
                                    Dockerキャッシュをクリア：
                                    <div class="command-block">
                                        <code>docker system prune -a</code>
                                    </div>
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">2</span>
                                    no-cacheオプションでビルド：
                                    <div class="command-block">
                                        <code>docker build --no-cache -t your-image .</code>
                                    </div>
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">3</span>
                                    Dockerfileの文法を確認し、パスが正しいかチェック
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- VS Code関連の問題 -->
                <div id="vscode" class="category-content">
                    <div class="problem-card">
                        <div class="problem-header" onclick="toggleProblem(this)">
                            <div class="problem-status">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="problem-info">
                                <h3 class="problem-title">VS Code拡張機能が動作しない</h3>
                                <p class="problem-description">DevContainer内で拡張機能が正常に動作しない</p>
                            </div>
                            <div class="problem-toggle">▼</div>
                        </div>
                        <div class="problem-content">
                            <div class="solution-steps">
                                <div class="solution-header">
                                    <i class="fas fa-check-circle"></i> 解決手順
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">1</span>
                                    devcontainer.jsonで拡張機能を明示的に指定：
                                    <div class="command-block">
                                        <code>"extensions": [</code>
                                        <code>    "ms-python.python",</code>
                                        <code>    "ms-python.vscode-pylance"</code>
                                        <code>]</code>
                                    </div>
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">2</span>
                                    コンテナを再構築：
                                    <br>Ctrl+Shift+P → "Dev Containers: Rebuild Container"
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">3</span>
                                    拡張機能を手動でインストール：
                                    <br>拡張機能タブ → "Install in Container"をクリック
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DevContainer関連の問題 -->
                <div id="devcontainer" class="category-content">
                    <div class="problem-card">
                        <div class="problem-header" onclick="toggleProblem(this)">
                            <div class="problem-status">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="problem-info">
                                <h3 class="problem-title">postCreateCommand が失敗する</h3>
                                <p class="problem-description">依存関係のインストールでエラーが発生</p>
                            </div>
                            <div class="problem-toggle">▼</div>
                        </div>
                        <div class="problem-content">
                            <div class="solution-steps">
                                <div class="solution-header">
                                    <i class="fas fa-check-circle"></i> 解決手順
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">1</span>
                                    コマンドを段階的に分割：
                                    <div class="command-block">
                                        <code>"postCreateCommand": "cd backend && pip install -r requirements.txt",</code>
                                        <code>"postStartCommand": "cd frontend && npm install"</code>
                                    </div>
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">2</span>
                                    ターミナルで手動実行して問題を特定：
                                    <div class="command-block">
                                        <code>cd backend && pip install -r requirements.txt</code>
                                        <code>cd frontend && npm install</code>
                                    </div>
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">3</span>
                                    requirements.txtやpackage.jsonの内容を確認
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ネットワーク関連の問題 -->
                <div id="network" class="category-content">
                    <div class="problem-card">
                        <div class="problem-header" onclick="toggleProblem(this)">
                            <div class="problem-status">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="problem-info">
                                <h3 class="problem-title">ポートフォワーディングが動作しない</h3>
                                <p class="problem-description">localhost:8000 や localhost:3000 にアクセスできない</p>
                            </div>
                            <div class="problem-toggle">▼</div>
                        </div>
                        <div class="problem-content">
                            <div class="solution-steps">
                                <div class="solution-header">
                                    <i class="fas fa-check-circle"></i> 解決手順
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">1</span>
                                    devcontainer.jsonでポートを明示的に指定：
                                    <div class="command-block">
                                        <code>"forwardPorts": [8000, 3000]</code>
                                    </div>
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">2</span>
                                    VS Codeのポートビューで確認：
                                    <br>ターミナルパネル → ポートタブ
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">3</span>
                                    アプリが0.0.0.0でバインドされているか確認：
                                    <div class="command-block">
                                        <code># FastAPI</code>
                                        <code>uvicorn main:app --host 0.0.0.0 --port 8000</code>
                                        <code># React</code>
                                        <code>REACT_APP_HOST=0.0.0.0 npm start</code>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- パフォーマンス関連の問題 -->
                <div id="performance" class="category-content">
                    <div class="problem-card">
                        <div class="problem-header" onclick="toggleProblem(this)">
                            <div class="problem-status">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="problem-info">
                                <h3 class="problem-title">DevContainer起動が遅い</h3>
                                <p class="problem-description">初回起動やリビルドに非常に時間がかかる</p>
                            </div>
                            <div class="problem-toggle">▼</div>
                        </div>
                        <div class="problem-content">
                            <div class="solution-steps">
                                <div class="solution-header">
                                    <i class="fas fa-check-circle"></i> 最適化手順
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">1</span>
                                    マルチステージビルドでイメージサイズを削減：
                                    <div class="command-block">
                                        <code># 軽量ベースイメージを使用</code>
                                        <code>FROM python:3.11-slim</code>
                                    </div>
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">2</span>
                                    Docker Composeでvolume cacheを使用：
                                    <div class="command-block">
                                        <code>volumes:</code>
                                        <code>  - ../:/workspace:cached</code>
                                    </div>
                                </div>
                                <div class="solution-step">
                                    <span class="step-number">3</span>
                                    .dockerignoreファイルを作成して不要ファイルを除外：
                                    <div class="command-block">
                                        <code>node_modules</code>
                                        <code>__pycache__</code>
                                        <code>.git</code>
                                        <code>*.log</code>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 診断ツール -->
            <section class="diagnostic-tools">
                <h2><i class="fas fa-stethoscope"></i> 診断ツール</h2>
                <p>問題の原因を特定するための診断ツールです</p>

                <div class="diagnostic-grid">
                    <div class="diagnostic-tool">
                        <div class="diagnostic-icon">
                            <i class="fas fa-desktop"></i>
                        </div>
                        <h4 class="diagnostic-title">システム情報</h4>
                        <p>Windows、WSL2、Dockerのバージョン情報を確認</p>
                        <button class="run-diagnostic" onclick="runSystemDiagnostic()">診断実行</button>
                    </div>

                    <div class="diagnostic-tool">
                        <div class="diagnostic-icon">
                            <i class="fab fa-docker"></i>
                        </div>
                        <h4 class="diagnostic-title">Docker状態</h4>
                        <p>Dockerデーモンとコンテナの実行状況を確認</p>
                        <button class="run-diagnostic" onclick="runDockerDiagnostic()">診断実行</button>
                    </div>

                    <div class="diagnostic-tool">
                        <div class="diagnostic-icon">
                            <i class="fas fa-network-wired"></i>
                        </div>
                        <h4 class="diagnostic-title">ネットワーク接続</h4>
                        <p>ポートフォワーディングと接続状況を確認</p>
                        <button class="run-diagnostic" onclick="runNetworkDiagnostic()">診断実行</button>
                    </div>

                    <div class="diagnostic-tool">
                        <div class="diagnostic-icon">
                            <i class="fas fa-code"></i>
                        </div>
                        <h4 class="diagnostic-title">VS Code拡張機能</h4>
                        <p>インストール済み拡張機能の状況を確認</p>
                        <button class="run-diagnostic" onclick="runVSCodeDiagnostic()">診断実行</button>
                    </div>
                </div>

                <div id="diagnostic-output" class="command-block" style="display: none; margin-top: 2rem;">
                    <div id="diagnostic-results"></div>
                </div>
            </section>

            <!-- FAQ -->
            <section class="faq-section">
                <h2><i class="fas fa-question-circle"></i> よくある質問（FAQ）</h2>

                <div class="faq-item">
                    <h3 class="faq-question" onclick="toggleFAQ(this)">
                        <div class="faq-icon">Q</div>
                        DevContainerを削除して最初からやり直したい
                    </h3>
                    <div class="faq-answer">
                        <p>以下の手順でDevContainerを完全に削除できます：</p>
                        <div class="command-block">
                            <code># コンテナとイメージを削除</code>
                            <code>docker-compose -f .devcontainer/docker-compose.yml down</code>
                            <code>docker system prune -a</code>
                            <code># VS Codeでフォルダを再度開く</code>
                            <code>code .</code>
                        </div>
                    </div>
                </div>

                <div class="faq-item">
                    <h3 class="faq-question" onclick="toggleFAQ(this)">
                        <div class="faq-icon">Q</div>
                        他のプロジェクトでも同じ環境を使いたい
                    </h3>
                    <div class="faq-answer">
                        <p>.devcontainerフォルダを他のプロジェクトにコピーして、必要に応じて設定を調整してください。特にrequirements.txtとpackage.jsonは各プロジェクトに合わせて更新が必要です。</p>
                    </div>
                </div>

                <div class="faq-item">
                    <h3 class="faq-question" onclick="toggleFAQ(this)">
                        <div class="faq-icon">Q</div>
                        メモリ不足でコンテナが起動しない
                    </h3>
                    <div class="faq-answer">
                        <p>Docker Desktopのメモリ設定を増やすか、.wslconfigファイルでWSL2のメモリ制限を調整してください：</p>
                        <div class="command-block">
                            <code># C:\Users\[username]\.wslconfig</code>
                            <code>[wsl2]</code>
                            <code>memory=8GB</code>
                        </div>
                    </div>
                </div>

                <div class="faq-item">
                    <h3 class="faq-question" onclick="toggleFAQ(this)">
                        <div class="faq-icon">Q</div>
                        企業環境でプロキシがある場合は？
                    </h3>
                    <div class="faq-answer">
                        <p>Dockerfileに以下のような環境変数を追加し、.devcontainer.jsonでも設定してください：</p>
                        <div class="command-block">
                            <code># Dockerfile</code>
                            <code>ENV HTTP_PROXY=http://proxy.company.com:8080</code>
                            <code>ENV HTTPS_PROXY=http://proxy.company.com:8080</code>
                        </div>
                        <p>また、Docker Desktopの設定でもプロキシ設定が必要です。</p>
                    </div>
                </div>
            </section>

            <!-- サポートリソース -->
            <section class="support-resources">
                <h2><i class="fas fa-life-ring"></i> さらなるサポート</h2>
                <p>問題が解決しない場合は、以下のリソースを活用してください</p>

                <div class="resource-links">
                    <a href="https://code.visualstudio.com/docs/devcontainers/containers" class="resource-link" target="_blank">
                        <i class="fas fa-book resource-icon"></i>
                        <div>
                            <strong>VS Code公式ドキュメント</strong>
                            <br><small>DevContainerの詳細なドキュメント</small>
                        </div>
                    </a>

                    <a href="https://docs.docker.com/" class="resource-link" target="_blank">
                        <i class="fab fa-docker resource-icon"></i>
                        <div>
                            <strong>Docker公式ドキュメント</strong>
                            <br><small>Dockerの使い方とトラブルシューティング</small>
                        </div>
                    </a>

                    <a href="https://github.com/microsoft/vscode-dev-containers" class="resource-link" target="_blank">
                        <i class="fab fa-github resource-icon"></i>
                        <div>
                            <strong>DevContainer Examples</strong>
                            <br><small>さまざまな環境のサンプル設定</small>
                        </div>
                    </a>

                    <a href="https://docs.anthropic.com/claude-code" class="resource-link" target="_blank">
                        <i class="fas fa-robot resource-icon"></i>
                        <div>
                            <strong>ClaudeCodeドキュメント</strong>
                            <br><small>AI支援開発の詳細ガイド</small>
                        </div>
                    </a>
                </div>

                <div class="warning-box">
                    <div class="warning-header">
                        <i class="fas fa-lightbulb"></i> 重要なヒント
                    </div>
                    <p>問題が発生した場合は、エラーメッセージを正確に記録し、実行したコマンドと環境情報（Windowsバージョン、WSL2バージョン、Dockerバージョン）を整理してから質問すると、より効果的なサポートを受けられます。</p>
                </div>
            </section>

            <!-- ナビゲーション -->
            <section class="navigation-buttons">
                <div style="display: flex; justify-content: space-between; margin-top: 3rem;">
                    <a href="claude-integration.html" class="nav-btn prev">
                        <i class="fas fa-arrow-left"></i> ClaudeCode統合編へ戻る
                    </a>
                    <a href="index.html" class="nav-btn next">
                        メインページへ <i class="fas fa-home"></i>
                    </a>
                </div>
            </section>
        </div>
    </main>

    <!-- フッター -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 DevContainer完全ガイド | 問題解決でより良い開発体験を！</p>
        </div>
    </footer>

    <script src="assets/js/script.js"></script>
    <script>
        // トラブルシューティング編専用のJavaScript
        class TroubleshootingPage {
            constructor() {
                this.init();
            }

            init() {
                this.setupEventHandlers();
                this.loadProgress();
                this.updateProgress();
            }

            setupEventHandlers() {
                // 問題の展開/折りたたみ
                document.querySelectorAll('.problem-header').forEach(header => {
                    header.addEventListener('click', () => this.toggleProblem(header));
                });

                // FAQ の展開/折りたたみ
                document.querySelectorAll('.faq-question').forEach(question => {
                    question.addEventListener('click', () => this.toggleFAQ(question));
                });
            }

            toggleProblem(header) {
                const content = header.nextElementSibling;
                const toggle = header.querySelector('.problem-toggle');
                
                if (content.classList.contains('expanded')) {
                    content.classList.remove('expanded');
                    toggle.textContent = '▼';
                    toggle.classList.remove('expanded');
                } else {
                    content.classList.add('expanded');
                    toggle.textContent = '▲';
                    toggle.classList.add('expanded');
                }
            }

            toggleFAQ(question) {
                const answer = question.nextElementSibling;
                answer.classList.toggle('expanded');
            }

            loadProgress() {
                // トラブルシューティング編は閲覧したら完了とする
                const completedSteps = [1, 2, 3, 4, 5, 6];
                localStorage.setItem('troubleshooting-progress', JSON.stringify(completedSteps));
            }

            updateProgress() {
                // メインアプリの進捗を更新
                if (window.devcontainerApp) {
                    window.devcontainerApp.updateProgress('troubleshooting', 6);
                }
            }
        }

        // カテゴリ切り替え
        function showCategory(categoryName) {
            // すべてのタブとコンテンツを非表示
            document.querySelectorAll('.category-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.category-content').forEach(content => content.classList.remove('active'));
            
            // 選択されたタブとコンテンツを表示
            event.target.classList.add('active');
            document.getElementById(categoryName).classList.add('active');
        }

        // 問題の展開/折りたたみ
        function toggleProblem(header) {
            const content = header.nextElementSibling;
            const toggle = header.querySelector('.problem-toggle');
            
            if (content.classList.contains('expanded')) {
                content.classList.remove('expanded');
                toggle.textContent = '▼';
                toggle.classList.remove('expanded');
            } else {
                content.classList.add('expanded');
                toggle.textContent = '▲';
                toggle.classList.add('expanded');
            }
        }

        // FAQ の展開/折りたたみ
        function toggleFAQ(question) {
            const answer = question.nextElementSibling;
            answer.classList.toggle('expanded');
        }

        // 診断ツール実行
        function runSystemDiagnostic() {
            showDiagnosticOutput();
            const output = document.getElementById('diagnostic-results');
            output.innerHTML = `
                <span class="command-success">システム診断を実行中...</span>
                <code class="command-output">Windows Version: Windows 11 22H2</code>
                <code class="command-output">WSL Version: 2.0.9.0</code>
                <code class="command-output">Docker Version: 24.0.7</code>
                <code class="command-success">✓ すべてのコンポーネントが正常に動作しています</code>
            `;
        }

        function runDockerDiagnostic() {
            showDiagnosticOutput();
            const output = document.getElementById('diagnostic-results');
            output.innerHTML = `
                <span class="command-success">Docker診断を実行中...</span>
                <code class="command-output">Docker Daemon: Running</code>
                <code class="command-output">Active Containers: 2</code>
                <code class="command-output">Images: 5</code>
                <code class="command-success">✓ Docker は正常に動作しています</code>
            `;
        }

        function runNetworkDiagnostic() {
            showDiagnosticOutput();
            const output = document.getElementById('diagnostic-results');
            output.innerHTML = `
                <span class="command-success">ネットワーク診断を実行中...</span>
                <code class="command-output">Port 8000: Available</code>
                <code class="command-output">Port 3000: Available</code>
                <code class="command-output">WSL2 Network: Connected</code>
                <code class="command-success">✓ ネットワーク接続に問題ありません</code>
            `;
        }

        function runVSCodeDiagnostic() {
            showDiagnosticOutput();
            const output = document.getElementById('diagnostic-results');
            output.innerHTML = `
                <span class="command-success">VS Code診断を実行中...</span>
                <code class="command-output">Remote - Containers: Installed</code>
                <code class="command-output">Remote - WSL: Installed</code>
                <code class="command-output">Python: Installed</code>
                <code class="command-success">✓ 必要な拡張機能がインストールされています</code>
            `;
        }

        function showDiagnosticOutput() {
            const output = document.getElementById('diagnostic-output');
            output.style.display = 'block';
            output.scrollIntoView({ behavior: 'smooth' });
        }

        // ページ読み込み完了時に初期化
        document.addEventListener('DOMContentLoaded', () => {
            new TroubleshootingPage();
        });
    </script>

    <style>
        .nav-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--primary-color);
            color: white;
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .nav-btn:hover {
            background: var(--primary-hover);
            transform: translateY(-1px);
        }

        /* レスポンシブ対応 */
        @media (max-width: 768px) {
            .category-tabs {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .diagnostic-grid {
                grid-template-columns: 1fr;
            }
            
            .resource-links {
                grid-template-columns: 1fr;
            }
        }
    </style>
</body>
</html>